webpackJsonp([73],{"a+hu":function(t,a,e){"use strict";function i(t){e("nGng")}Object.defineProperty(a,"__esModule",{value:!0});var s=e("a3Yh"),n=e.n(s),r=e("2sCs"),o=e.n(r),d={data:function(){var t;return{dateArr:"",params:{type:"link",target:"",flag:4,begin:"",statisDay:"",end:""},time:"",date:{year:"",month:"",day:""},dataInfo:{pvTotal:0,visitorTotal:0,ipTotal:0,list:[]},chartLine:null,chartPie:null,chartLineOptions:{tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"5%",right:"5%",bottom:"14%"},xAxis:{type:"category",splitLine:{show:!1},boundaryGap:!0,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{splitLine:{show:!1},type:"value"},series:[]},chartPieOptions:{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[(t={name:"来源分析",type:"pie",radius:"55%"},n()(t,"radius",["50%","70%"]),n()(t,"data",[]),t)],color:["#56dea0","#ffbe60","#fa99cb","#46d7e8","#86c0e9"]}}},methods:{rangeTime:function(t){null!=t?(this.params.begin=t[0],this.params.end=t[1],this.params.flag=3,t[0]===t[1]?this.time=t[0]:this.time=t[0]+"-"+t[1]):(this.params.begin="",this.params.end="",this.params.flag=4,this.time=this.date.year+"-"+this.date.month+"-"+this.date.day),this.getDataInfo()},query:function(t){this.dateArr="",this.params.begin="",this.params.end="",4===t&&(this.time=this.date.year+"-"+this.date.month+"-"+this.date.day),1===t&&(this.time=this.date.year+"-"+this.date.month),2===t&&(this.time=this.date.year),this.getDataInfo()},getDataInfo:function(){var t=this;o.a.post(this.$api.flowSourceList,this.params).then(function(a){var e=[],i=[],s=[];for(var n in a.body.keys)e.push(a.body.keys[n]);for(var r in e){var o=a.body.resultMap[e[r]];s[r]={name:e[r],type:"line",showSymbol:!1,smooth:!0,data:t.getChartSeriesData(o)}}i=t.getXdata(a.body.resultMap[e[0]]);var d={legend:{data:e},xAxis:{data:i},series:s},l={series:[{name:"来源分类",data:t.getPieSeriesData(a.body.totalMap)}]};t.chartLine.setOption(d),t.chartPie.setOption(l)})},getXdata:function(t){var a=[];for(var e in t)a.push(t[e][1]);return a},getChartSeriesData:function(t){var a=[];for(var e in t)a.push(t[e][0]);return a},getPieSeriesData:function(t){var a=[];for(var e in t)a.push({name:e,value:t[e]});return a}},created:function(){var t=new Date,a=t.getFullYear(),e=t.getMonth()+1,i=t.getDate();this.date.year=a,this.date.month=e,this.date.day=i,this.year=a,this.month=e,this.time=a+"-"+e+"-"+i,this.getDataInfo()},mounted:function(){this.chartLine=echarts.init(document.getElementById("chartLine")),this.chartLine.setOption(this.chartLineOptions),this.chartPie=echarts.init(document.getElementById("chartPie")),this.chartPie.setOption(this.chartPieOptions)}},l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"cms-body cms-chart-box"},[e("div",{staticClass:"cms-list-header",staticStyle:{"padding-left":"0"}},[e("h5",{staticClass:"data-header-title"},[t._v("来访域名("+t._s(t.time)+")")]),t._v(" "),e("div",{staticClass:"flex-date"},[e("label",{staticClass:"cms-label",staticStyle:{"margin-left":"0"}},[t._v("日期：")]),t._v(" "),e("el-radio-group",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{change:t.query},model:{value:t.params.flag,callback:function(a){t.$set(t.params,"flag",a)},expression:"params.flag"}},[e("el-radio-button",{attrs:{label:4}},[t._v("今日")]),t._v(" "),e("el-radio-button",{attrs:{label:1}},[t._v("本月")]),t._v(" "),e("el-radio-button",{attrs:{label:2}},[t._v("今年")])],1),t._v(" "),e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",editable:!1,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.rangeTime},model:{value:t.dateArr,callback:function(a){t.dateArr=a},expression:"dateArr"}})],1)]),t._v(" "),t._m(0)])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"flex"},[e("div",{staticClass:"chart-style",attrs:{id:"chartPie"}}),t._v(" "),e("div",{staticClass:"chart-style",attrs:{id:"chartLine"}})])}],h={render:l,staticRenderFns:c},m=h,p=e("Mw9A"),u=i,f=p(d,m,!1,u,"data-v-68acb3cc",null);a.default=f.exports},mcSn:function(t,a,e){a=t.exports=e("BkJT")(!1),a.push([t.i,"\n.data-item[data-v-68acb3cc] {\n  float: left;\n  min-width: 170px;\n  margin-top: 30px;\n}\n.data-item .data-title[data-v-68acb3cc] {\n    font-size: 12px;\n    color: #878d99;\n    margin-bottom: 17px;\n}\n.data-item .data-num[data-v-68acb3cc] {\n    color: #353535;\n    font-size: 24px;\n}\n.chart-style[data-v-68acb3cc] {\n  width: 100%;\n  height: 380px;\n  border-bottom: 1px dashed #eee;\n  margin-bottom: 15px;\n}\n",""])},nGng:function(t,a,e){var i=e("mcSn");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("8bSs")("3d892b98",i,!0)}});